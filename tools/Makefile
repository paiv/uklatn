.PHONY: all
.PHONY: c
.PHONY: csharp
.PHONY: elixir
.PHONY: go
.PHONY: java
.PHONY: js
.PHONY: php
.PHONY: py
.PHONY: ruby
.PHONY: swift

PYTHON ?= python
PROJECT_ROOT ?= ..

all: c csharp elixir go js php py java ruby swift

c:
	@echo "/* Generated by gentables.py, do not edit. */\n" > "$(PROJECT_ROOT)/c/_tables.c"
	@$(PYTHON) gentables.py c >> "$(PROJECT_ROOT)/c/_tables.c"
	@echo "/* Generated by gentests.py, do not edit. */\n" > "$(PROJECT_ROOT)/c/_tests.c"
	@$(PYTHON) gentests.py c >> "$(PROJECT_ROOT)/c/_tests.c"

csharp:
	@echo "/* Generated by gentables.py, do not edit. */\n" > "$(PROJECT_ROOT)/csharp/UkrainianLatin/UkrainianLatin.cs"
	@$(PYTHON) gentables.py csharp >> "$(PROJECT_ROOT)/csharp/UkrainianLatin/UkrainianLatin.cs"
	@echo "/* Generated by gentests.py, do not edit. */\n" > "$(PROJECT_ROOT)/csharp/UkrainianLatin.Tests/UkrainianLatinTest.cs"
	@$(PYTHON) gentests.py csharp >> "$(PROJECT_ROOT)/csharp/UkrainianLatin.Tests/UkrainianLatinTest.cs"

elixir:
	@echo "# Generated by gentables.py, do not edit.\n" > "$(PROJECT_ROOT)/elixir/lib/paiv/ukrainian_latin.ex"
	@$(PYTHON) gentables.py elixir >> "$(PROJECT_ROOT)/elixir/lib/paiv/ukrainian_latin.ex"
	@echo "# Generated by gentests.py, do not edit.\n" > "$(PROJECT_ROOT)/elixir/test/paiv/ukrainian_latin_test.exs"
	@$(PYTHON) gentests.py elixir >> "$(PROJECT_ROOT)/elixir/test/paiv/ukrainian_latin_test.exs"
	@(cd $(PROJECT_ROOT)/elixir && mix format)

go:
	@echo "/* Generated by gentables.py, do not edit. */\n" > "$(PROJECT_ROOT)/go/uklatn/uklatn.go"
	@$(PYTHON) gentables.py go >> "$(PROJECT_ROOT)/go/uklatn/uklatn.go"
	@echo "/* Generated by gentests.py, do not edit. */\n" > "$(PROJECT_ROOT)/go/uklatn/uklatn_test.go"
	@$(PYTHON) gentests.py go >> "$(PROJECT_ROOT)/go/uklatn/uklatn_test.go"
	@(cd $(PROJECT_ROOT)/go/uklatn && go fmt -x)

java:
	@echo "/* Generated by gentables.py, do not edit. */\n" > "$(PROJECT_ROOT)/java/src/main/java/io/github/paiv/uklatn/UkrainianLatin.java"
	@$(PYTHON) gentables.py java >> "$(PROJECT_ROOT)/java/src/main/java/io/github/paiv/uklatn/UkrainianLatin.java"
	@echo "/* Generated by gentests.py, do not edit. */\n" > "$(PROJECT_ROOT)/java/src/test/java/io/github/paiv/uklatn/UkrainianLatinTest.java"
	@$(PYTHON) gentests.py java >> "$(PROJECT_ROOT)/java/src/test/java/io/github/paiv/uklatn/UkrainianLatinTest.java"

js:
	@echo "/* Generated by gentables.py, do not edit. */\n" > "$(PROJECT_ROOT)/js/uklatn.js"
	@$(PYTHON) gentables.py js >> "$(PROJECT_ROOT)/js/uklatn.js"
	@echo "/* Generated by gentests.py, do not edit. */\n" > "$(PROJECT_ROOT)/js/testuklatn.js"
	@$(PYTHON) gentests.py js >> "$(PROJECT_ROOT)/js/testuklatn.js"

php:
	@$(PYTHON) gentables.py php > "$(PROJECT_ROOT)/php/src/UkrainianLatin.php"
	@$(PYTHON) gentests.py php > "$(PROJECT_ROOT)/php/test/UkrainianLatinTest.php"

py:
	@echo "#!/usr/bin/env python\n# Generated by gentables.py, do not edit.\n" > "$(PROJECT_ROOT)/python/uklatn.py"
	@$(PYTHON) gentables.py py >> "$(PROJECT_ROOT)/python/uklatn.py"
	@echo "# Generated by gentests.py, do not edit.\n" > "$(PROJECT_ROOT)/python/tests/uklatn_tests.py"
	@$(PYTHON) gentests.py py >> "$(PROJECT_ROOT)/python/tests/uklatn_tests.py"

ruby:
	@echo "# Generated by gentables.py, do not edit.\n" > "$(PROJECT_ROOT)/ruby/lib/uklatn.rb"
	@$(PYTHON) gentables.py ruby >> "$(PROJECT_ROOT)/ruby/lib/uklatn.rb"
	@echo "# Generated by gentests.py, do not edit.\n" > "$(PROJECT_ROOT)/ruby/test/uklatn/test_uklatn.rb"
	@$(PYTHON) gentests.py ruby >> "$(PROJECT_ROOT)/ruby/test/uklatn/test_uklatn.rb"

swift:
	@echo "/* Generated by gentables.py, do not edit. */\n" > "$(PROJECT_ROOT)/swift/Sources/UkrainianLatin/UKLatn.swift"
	@$(PYTHON) gentables.py swift >> "$(PROJECT_ROOT)/swift/Sources/UkrainianLatin/UKLatn.swift"
	@echo "/* Generated by gentests.py, do not edit. */\n" > "$(PROJECT_ROOT)/swift/Tests/UkrainianLatinTests/UKLatnTests.swift"
	@$(PYTHON) gentests.py swift >> "$(PROJECT_ROOT)/swift/Tests/UkrainianLatinTests/UKLatnTests.swift"
