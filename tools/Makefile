.PHONY: all
.PHONY: c
.PHONY: java
.PHONY: js
.PHONY: py
.PHONY: swift

PYTHON ?= python
PROJECT_ROOT ?= ..

all: c js py java swift

c:
	@echo "/* Generated by gentables.py, do not edit. */\n" > "$(PROJECT_ROOT)/c/_tables.c"
	@$(PYTHON) gentables.py c >> "$(PROJECT_ROOT)/c/_tables.c"
	@echo "/* Generated by gentests.py, do not edit. */\n" > "$(PROJECT_ROOT)/c/_tests.c"
	@$(PYTHON) gentests.py c >> "$(PROJECT_ROOT)/c/_tests.c"

java:
	@echo "/* Generated by gentables.py, do not edit. */\n" > "$(PROJECT_ROOT)/java/src/main/java/paiv/uklatn/UkrainianLatin.java"
	@$(PYTHON) gentables.py java >> "$(PROJECT_ROOT)/java/src/main/java/paiv/uklatn/UkrainianLatin.java"
	@echo "/* Generated by gentests.py, do not edit. */\n" > "$(PROJECT_ROOT)/java/src/test/java/paiv/uklatn/UkrainianLatinTest.java"
	@$(PYTHON) gentests.py java >> "$(PROJECT_ROOT)/java/src/test/java/paiv/uklatn/UkrainianLatinTest.java"

js:
	@echo "/* Generated by gentables.py, do not edit. */\n" > "$(PROJECT_ROOT)/js/uklatn.js"
	@$(PYTHON) gentables.py js >> "$(PROJECT_ROOT)/js/uklatn.js"
	@echo "/* Generated by gentests.py, do not edit. */\n" > "$(PROJECT_ROOT)/js/testuklatn.js"
	@$(PYTHON) gentests.py js >> "$(PROJECT_ROOT)/js/testuklatn.js"

py:
	@echo "#!/usr/bin/env python\n# Generated by gentables.py, do not edit.\n" > "$(PROJECT_ROOT)/python/uklatn.py"
	@$(PYTHON) gentables.py py >> "$(PROJECT_ROOT)/python/uklatn.py"
	@echo "# Generated by gentests.py, do not edit.\n" > "$(PROJECT_ROOT)/python/tests/uklatn_tests.py"
	@$(PYTHON) gentests.py py >> "$(PROJECT_ROOT)/python/tests/uklatn_tests.py"

swift:
	@echo "/* Generated by gentables.py, do not edit. */\n" > "$(PROJECT_ROOT)/swift/Sources/UkrainianLatin/UKLatn.swift"
	@$(PYTHON) gentables.py swift >> "$(PROJECT_ROOT)/swift/Sources/UkrainianLatin/UKLatn.swift"
	@echo "/* Generated by gentests.py, do not edit. */\n" > "$(PROJECT_ROOT)/swift/Tests/UkrainianLatinTests/UKLatnTests.swift"
	@$(PYTHON) gentests.py swift >> "$(PROJECT_ROOT)/swift/Tests/UkrainianLatinTests/UKLatnTests.swift"
